/* === Liquid Glass Theme =============================================== */
:root{
  color-scheme: light dark;

  /* 尺寸/間距 */
  --radius: 18px;
  --space: clamp(14px, 2.2vw, 24px);
  --text: clamp(14px, 1.6vw, 16px);

  /* 主色系（可自行調） */
  --brand: #5aa6ff;         /* 主題藍（液態玻璃高光） */
  --brand-ink: #0b1020;

  /* 背景漸層 */
  --bg-1: #dff3ff;
  --bg-2: #cde8ff;
  --bg-3: #bfe0ff;

  /* 玻璃層顏色（用 color-mix 增加透明感） */
  --glass-bg: color-mix(in oklab, white 12%, transparent);
  --glass-border: color-mix(in oklab, #8fbaff 30%, white 10%);
  --ink: #0f172a;
  --muted: #637089;

  /* 陰影與高光 */
  --elev-1: 0 10px 30px rgba(24, 58, 110, .10);
  --elev-2: 0 20px 60px rgba(24, 58, 110, .18);

  /* 側邊欄色彩（底層 + 玻璃層） */
  --side-ink: #0b1020;
  --side-muted: #4b5563;
  --side-glass-bg: color-mix(in oklab, white 78%, transparent);
  --side-glass-border: color-mix(in oklab, var(--brand) 18%, white 70%);
  --side-card-bg: color-mix(in oklab, white 75%, transparent);
  --side-hover-bg: color-mix(in oklab, #eaf3ff 65%, transparent);
  --side-submenu-bg: color-mix(in oklab, white 70%, transparent);
  --side-active-bg: color-mix(in oklab, var(--brand) 16%, white 84%);

  /* 裝飾流體色塊 */
  --blob-a: rgba(100, 180, 255, .35);
  --blob-b: rgba(180, 220, 255, .30);
  --blob-c: rgba(90, 150, 255, .28);
}

@media (prefers-color-scheme: dark){
  :root{
    --brand: #7cb2ff;
    --brand-ink: #081020;

    --bg-1: #071121;
    --bg-2: #0a1833;
    --bg-3: #0f2147;

    --glass-bg: color-mix(in oklab, #0d1b34 55%, transparent);
    --glass-border: color-mix(in oklab, #7fb0ff 22%, white 8%);
    --ink: #e6edf7;
    --muted: #a6b3cc;

    --elev-1: 0 14px 36px rgba(0,0,0,.35);
    --elev-2: 0 28px 76px rgba(0,0,0,.55);

    --side-ink: #e7efff;
    --side-muted:#a8b9dd;
    --side-glass-bg: color-mix(in oklab, #0b1020 68%, transparent);
    --side-glass-border: color-mix(in oklab, #7aa7ff 28%, white 10%);
    --side-card-bg: color-mix(in oklab, #0b1020 30%, transparent);
    --side-hover-bg: color-mix(in oklab, #0f1b3a 28%, transparent);
    --side-submenu-bg: color-mix(in oklab, #0b1020 24%, transparent);
    --side-active-bg: color-mix(in oklab, #11214a 40%, transparent);

    --blob-a: rgba(80, 140, 255, .28);
    --blob-b: rgba(40, 110, 255, .22);
    --blob-c: rgba(120, 180, 255, .20);
  }
}

/* === 基底背景：柔和漸層 + 液態漂浮色塊 =============================== */
html, body{ height: 100%; }
body{
  margin: 0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  font-size: var(--text);
  display: flex;
  min-height: 100vh;
  min-height: 100dvh;
  background: linear-gradient(135deg, var(--bg-1), var(--bg-2), var(--bg-3));
  overflow-x: hidden;
  position: relative;
}

/* 背景漂浮液態色塊*/
body::before,
body::after{
  content:"";
  position: fixed;
  inset: -20vmax auto auto -10vmax;
  width: 60vmax; height: 60vmax;
  background: radial-gradient(40% 40% at 50% 50%, var(--blob-a), transparent 60%),
              radial-gradient(35% 35% at 70% 20%, var(--blob-b), transparent 60%),
              radial-gradient(30% 30% at 20% 70%, var(--blob-c), transparent 60%);
  filter: blur(30px) saturate(110%);
  pointer-events: none;
  z-index: 0;
  animation: floatA 22s ease-in-out infinite alternate;
}
body::after{
  inset: auto -15vmax -15vmax auto;
  transform: rotate(15deg);
  animation: floatB 26s ease-in-out infinite alternate;
}

@keyframes floatA { from { transform: translateY(-2%) } to { transform: translateY(3%) } }
@keyframes floatB { from { transform: translateY(2%) } to { transform: translateY(-3%) } }

@media (prefers-reduced-motion: reduce){
  body::before, body::after{ animation: none }
}

/* === 版型：側邊欄（玻璃） + 內容 ==================================== */
.sidebar {
  width: 280px;
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 2;
  border-right: 1px solid var(--glass-border);
  min-height: 100dvh;
}

.sidebar::before {
  content:"";
  position: absolute;
  inset: 0;
  background: var(--side-glass-bg);
  backdrop-filter: blur(14px) saturate(130%);
  -webkit-backdrop-filter: blur(14px) saturate(130%);
  box-shadow: var(--elev-1);
  z-index: -1;
}

.brand{
  padding: 18px 22px;
  font-weight: 800;
  font-size: 22px;
  letter-spacing: .4px;
  border-bottom: 1px solid var(--side-glass-border);
  color: var(--side-ink);
  text-decoration: none;
  display: block;
  transition: transform .2s ease, color .2s ease, text-shadow .2s ease;
}
.brand:hover{ transform: scale(1.05); color: var(--brand); text-shadow: 0 0 18px color-mix(in oklab, var(--brand) 45%, transparent); }
.brand:active{ transform: scale(.97); }

.nav{ padding: 10px; }
.item{ margin:8px 0; border:1px solid var(--side-glass-border); border-radius:16px; overflow:hidden; background: var(--side-card-bg); }
.item > button{
  width:100%; text-align:left; background:transparent; border:0; color:var(--side-ink);
  padding:12px 14px; cursor:pointer; display:flex; justify-content:space-between; align-items:center;
}
.item > button:hover{ background: var(--side-hover-bg); }
.caret{ transition: transform .2s ease }
.item.open .caret{ transform: rotate(90deg) }
.submenu{
  display:none; border-top:1px solid var(--side-glass-border);
  background: var(--side-submenu-bg);
}
.item.open .submenu{ display:block }
.link{
  display:block; color:var(--side-ink); text-decoration:none; padding:10px 18px;
  border-top:1px dashed rgba(255,255,255,.08);
}
.link:hover{ background: var(--side-hover-bg) }
.active{ background: var(--side-active-bg) }
.footer{
  margin-top:auto; padding:14px 16px; font-size:12px; color:var(--side-muted);
  border-top:1px solid var(--side-glass-border);
}

.logout{
  display:block;
  margin-top:12px;
  padding:12px 0;
  text-align:center;
  font-size:16px;
  font-weight:700;
  color:#fff;
  background:#ef4444;
  border-radius:12px;
  text-decoration:none;
  box-shadow: 0 8px 22px rgba(255,255,255,.45);
  transition: background .2s ease, transform .1s ease, box-shadow .2s ease;
}
.logout:hover{ background:#dc2626; box-shadow: 0 8px 22px rgba(220,38,38,.35); }
.logout:active{ transform: scale(.98) }

/* === 主內容：透明玻璃面板 ============================================ */
.content{
  flex: 1; min-width: 0; display: flex; flex-direction: column;
  min-height: 100dvh;
  position: relative; z-index: 1; background: transparent;
}
.topbar{
  height: 56px;
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  background: color-mix(in oklab, var(--glass-bg) 85%, transparent);
  border-bottom: 1px solid var(--glass-border);
  display:flex; align-items:center; justify-content:space-between; padding:0 16px; position: sticky; top: 0;
  box-shadow: var(--elev-1);
}
.container{
  padding: 22px; max-width: 1100px; width: 100%; margin: 0 auto;
}

/* 玻璃卡片（表單/資訊容器） */
.card{
  background: color-mix(in oklab, var(--glass-bg) 92%, transparent);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius);
  box-shadow: var(--elev-2);
  padding: calc(var(--space) * 1.0);
  margin: 0 0 18px;
  color: var(--ink);
  backdrop-filter: blur(16px) saturate(160%);
  -webkit-backdrop-filter: blur(16px) saturate(160%);
}
h1,h2,h3{ color: var(--ink); margin: 0 0 10px }
p,li,td,th{ color: var(--ink) }

/* 主要操作按鈕（玻璃高光） */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  min-height: 44px; padding: 10px 16px; border-radius: 14px; border: 1px solid color-mix(in oklab, var(--brand) 26%, white 20%);
  background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 14%, white 82%), color-mix(in oklab, var(--brand) 12%, white 75%));
  color: var(--brand-ink); cursor: pointer; box-shadow: 0 8px 22px rgba(90,166,255,.25);
  transition: transform .06s ease, filter .15s ease, box-shadow .2s ease;
}
.btn:hover{ filter: brightness(.98); box-shadow: 0 10px 28px rgba(90,166,255,.32) }
.btn:active{ transform: translateY(1px) }
.btn-outline{
  background: color-mix(in oklab, var(--glass-bg) 70%, transparent);
  border: 1px solid color-mix(in oklab, var(--brand) 35%, white 25%);
  color: var(--ink);
}

/* 管理表格：玻璃表面 + 斑馬線 */
.table{
  width:100%; border-collapse: collapse;
  background: color-mix(in oklab, var(--glass-bg) 86%, transparent);
  border:1px solid var(--glass-border);
  border-radius: 14px; overflow: hidden;
  backdrop-filter: blur(10px) saturate(150%);
}
.table thead th{
  background: linear-gradient(180deg,
              color-mix(in oklab, var(--glass-bg) 96%, transparent),
              color-mix(in oklab, var(--glass-bg) 82%, transparent));
  color: var(--ink);
  text-align: left; padding: 10px;
  border-bottom: 1px solid var(--glass-border);
}
.table td{ padding:10px; border-bottom:1px solid var(--glass-border); color: var(--ink) }
.table tr:nth-child(even){
  background: color-mix(in oklab, var(--glass-bg) 75%, transparent);
}

/* RWD：窄螢幕側欄收斂 */
@media (max-width: 900px){
  .sidebar{ width: 78px }
  .brand{ font-size: 18px; padding: 14px 12px }
  .item > button span:first-child{
    overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  }
}

/* 動畫偏好：關閉時移除大多數陰影/動畫 */
@media (prefers-reduced-motion: reduce){
  .btn, .brand{ transition: none }
}
